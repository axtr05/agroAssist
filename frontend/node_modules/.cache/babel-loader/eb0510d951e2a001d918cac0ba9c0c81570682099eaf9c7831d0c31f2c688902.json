{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Akshay\\\\Downloads\\\\test\\\\agroAssist\\\\frontend\\\\src\\\\utils\\\\Context.js\",\n  _s = $RefreshSig$();\n// src/utils/Context.js\nimport React, { createContext, useState, useRef, useEffect, useCallback } from \"react\";\nimport { sendMsgToAI } from \"./Gemini\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ContextApp = /*#__PURE__*/createContext();\n\n// Helper function to convert file to Base64\nconst fileToGenerativePart = file => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      // Remove the data URI prefix (e.g., \"data:image/jpeg;base64,\")\n      const base64Data = reader.result.split(',')[1];\n      resolve({\n        inlineData: {\n          mimeType: file.type,\n          data: base64Data\n        }\n      });\n    };\n    reader.onerror = reject;\n    reader.readAsDataURL(file);\n  });\n};\nfunction AppContext({\n  children\n}) {\n  _s();\n  const [showSlide, setShowSlide] = useState(false);\n  const [Mobile, setMobile] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [chatValue, setChatValue] = useState(\"\");\n  const [message, setMessage] = useState([]);\n  const msgEnd = useRef(null);\n  // Removed language state as dropdown was removed\n\n  // --- NEW STATE FOR IMAGE ---\n  const [selectedImage, setSelectedImage] = useState(null); // Holds the File object\n  const [previewImage, setPreviewImage] = useState(null); // Holds Data URL for preview\n  // --- END NEW STATE ---\n\n  useEffect(() => {\n    var _msgEnd$current;\n    (_msgEnd$current = msgEnd.current) === null || _msgEnd$current === void 0 ? void 0 : _msgEnd$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [message]);\n  const handleSend = useCallback(async text => {\n    const promptText = text || chatValue;\n    // Don't send if only image is selected but no text prompt\n    if (promptText.trim() === \"\" && !selectedImage) return;\n\n    // --- Prepare image part if selected ---\n    let imagePartPromise = null;\n    let imageForMessage = null; // Store preview for message state\n    if (selectedImage) {\n      imagePartPromise = fileToGenerativePart(selectedImage);\n      imageForMessage = previewImage; // Use the data URL for display\n    }\n    // --- End image preparation ---\n\n    const userMessage = {\n      text: promptText,\n      isBot: false,\n      image: imageForMessage // Add image to message state\n    };\n\n    const botMessageTemplate = {\n      text: \"\",\n      isBot: true\n    };\n    const currentChatValue = chatValue; // Store before clearing state\n    const currentSelectedImage = selectedImage; // Store before clearing state\n\n    // Capture the history *before* adding the new messages\n    const historyForApi = [...message, userMessage];\n\n    // Update UI immediately\n    setMessage(prev => [...prev, userMessage, botMessageTemplate]);\n\n    // Clear state after capturing values\n    if (!text) {\n      // Clear text input if it wasn't passed directly (mic)\n      setChatValue(\"\");\n    }\n    setSelectedImage(null); // Clear selected image\n    setPreviewImage(null); // Clear preview image\n\n    setLoading(true);\n    try {\n      let imageInput = null;\n      if (imagePartPromise) {\n        imageInput = await imagePartPromise; // Wait for Base64 conversion\n      }\n\n      // Define the callback for stream chunks\n      const onChunk = chunk => {\n        setMessage(prevChunk => {\n          const updatedMessages = [...prevChunk];\n          if (updatedMessages.length > 0) {\n            const lastMsgIndex = updatedMessages.length - 1;\n            if (updatedMessages[lastMsgIndex].isBot) {\n              updatedMessages[lastMsgIndex] = {\n                ...updatedMessages[lastMsgIndex],\n                text: (updatedMessages[lastMsgIndex].text || \"\") + chunk // Ensure text is initialized\n              };\n            }\n          }\n\n          return updatedMessages;\n        });\n      };\n\n      // Call API within the updater to use correct history\n      await sendMsgToAI(historyForApi, imageInput, onChunk); // Pass imageInput\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      setMessage(prevErr => {\n        const updatedMessages = [...prevErr];\n        if (updatedMessages.length > 0) {\n          const lastMsgIndex = updatedMessages.length - 1;\n          if (updatedMessages[lastMsgIndex].isBot) {\n            updatedMessages[lastMsgIndex] = {\n              ...updatedMessages[lastMsgIndex],\n              text: \"Sorry, an error occurred processing your request.\"\n            };\n          }\n        }\n        return updatedMessages;\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [chatValue, message, selectedImage, previewImage]); // Added image states to dependencies\n\n  const handleKeyPress = useCallback(e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  }, [handleSend]);\n\n  // handleQuery needs the same logic (without image for now, as examples don't use images)\n  const handleQuery = useCallback(async e => {\n    const text = e.target.innerText;\n    if (!text) return;\n    const userMessage = {\n      text,\n      isBot: false\n    };\n    const botMessageTemplate = {\n      text: \"\",\n      isBot: true\n    };\n    const historyForApi = [...message, userMessage]; // History for API call\n    setMessage(prev => [...prev, userMessage, botMessageTemplate]); // Update UI\n    setLoading(true);\n    try {\n      const onChunk = chunk => {\n        setMessage(prevChunk => {\n          const updatedMessages = [...prevChunk];\n          if (updatedMessages.length > 0) {\n            const lastMsgIndex = updatedMessages.length - 1;\n            if (updatedMessages[lastMsgIndex].isBot) {\n              updatedMessages[lastMsgIndex] = {\n                ...updatedMessages[lastMsgIndex],\n                text: (updatedMessages[lastMsgIndex].text || \"\") + chunk\n              };\n            }\n          }\n          return updatedMessages;\n        });\n      };\n      // Call API without image for handleQuery\n      await sendMsgToAI(historyForApi, null, onChunk);\n    } catch (error) {\n      console.error(\"Error sending query:\", error);\n      setMessage(prevErr => {\n        const updatedMessages = [...prevErr];\n        if (updatedMessages.length > 0) {\n          const lastMsgIndex = updatedMessages.length - 1;\n          if (updatedMessages[lastMsgIndex].isBot) {\n            updatedMessages[lastMsgIndex] = {\n              ...updatedMessages[lastMsgIndex],\n              text: \"Sorry, an error occurred.\"\n            };\n          }\n        }\n        return updatedMessages;\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [message]); // Added message dependency\n\n  const contextValue = {\n    showSlide,\n    setShowSlide,\n    Mobile,\n    setMobile,\n    loading,\n    setLoading,\n    chatValue,\n    setChatValue,\n    message,\n    setMessage,\n    msgEnd,\n    handleSend,\n    handleKeyPress,\n    handleQuery,\n    // Add image state and setter\n    selectedImage,\n    setSelectedImage,\n    previewImage,\n    setPreviewImage\n    // Removed language state/setter\n  };\n\n  return /*#__PURE__*/_jsxDEV(ContextApp.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContext, \"/qvEgitZwZ2p2Quu0Q0zDaB6cFY=\");\n_c = AppContext;\nexport default AppContext;\nvar _c;\n$RefreshReg$(_c, \"AppContext\");","map":{"version":3,"names":["React","createContext","useState","useRef","useEffect","useCallback","sendMsgToAI","jsxDEV","_jsxDEV","ContextApp","fileToGenerativePart","file","Promise","resolve","reject","reader","FileReader","onloadend","base64Data","result","split","inlineData","mimeType","type","data","onerror","readAsDataURL","AppContext","children","_s","showSlide","setShowSlide","Mobile","setMobile","loading","setLoading","chatValue","setChatValue","message","setMessage","msgEnd","selectedImage","setSelectedImage","previewImage","setPreviewImage","_msgEnd$current","current","scrollIntoView","behavior","handleSend","text","promptText","trim","imagePartPromise","imageForMessage","userMessage","isBot","image","botMessageTemplate","currentChatValue","currentSelectedImage","historyForApi","prev","imageInput","onChunk","chunk","prevChunk","updatedMessages","length","lastMsgIndex","error","console","prevErr","handleKeyPress","e","key","shiftKey","preventDefault","handleQuery","target","innerText","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Akshay/Downloads/test/agroAssist/frontend/src/utils/Context.js"],"sourcesContent":["// src/utils/Context.js\r\nimport React, { createContext, useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { sendMsgToAI } from \"./Gemini\";\r\n\r\nexport const ContextApp = createContext();\r\n\r\n// Helper function to convert file to Base64\r\nconst fileToGenerativePart = (file) => {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => {\r\n      // Remove the data URI prefix (e.g., \"data:image/jpeg;base64,\")\r\n      const base64Data = reader.result.split(',')[1];\r\n      resolve({\r\n        inlineData: {\r\n          mimeType: file.type,\r\n          data: base64Data\r\n        }\r\n      });\r\n    };\r\n    reader.onerror = reject;\r\n    reader.readAsDataURL(file);\r\n  });\r\n};\r\n\r\n\r\nfunction AppContext({ children }) {\r\n  const [showSlide, setShowSlide] = useState(false);\r\n  const [Mobile, setMobile] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [chatValue, setChatValue] = useState(\"\");\r\n  const [message, setMessage] = useState([]);\r\n  const msgEnd = useRef(null);\r\n  // Removed language state as dropdown was removed\r\n\r\n  // --- NEW STATE FOR IMAGE ---\r\n  const [selectedImage, setSelectedImage] = useState(null); // Holds the File object\r\n  const [previewImage, setPreviewImage] = useState(null); // Holds Data URL for preview\r\n  // --- END NEW STATE ---\r\n\r\n  useEffect(() => {\r\n    msgEnd.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [message]);\r\n\r\n  const handleSend = useCallback(async (text) => {\r\n    const promptText = text || chatValue;\r\n    // Don't send if only image is selected but no text prompt\r\n    if (promptText.trim() === \"\" && !selectedImage) return;\r\n\r\n    // --- Prepare image part if selected ---\r\n    let imagePartPromise = null;\r\n    let imageForMessage = null; // Store preview for message state\r\n    if (selectedImage) {\r\n      imagePartPromise = fileToGenerativePart(selectedImage);\r\n      imageForMessage = previewImage; // Use the data URL for display\r\n    }\r\n    // --- End image preparation ---\r\n\r\n    const userMessage = {\r\n      text: promptText,\r\n      isBot: false,\r\n      image: imageForMessage, // Add image to message state\r\n    };\r\n    const botMessageTemplate = { text: \"\", isBot: true };\r\n\r\n    const currentChatValue = chatValue; // Store before clearing state\r\n    const currentSelectedImage = selectedImage; // Store before clearing state\r\n\r\n    // Capture the history *before* adding the new messages\r\n    const historyForApi = [...message, userMessage];\r\n\r\n    // Update UI immediately\r\n    setMessage((prev) => [...prev, userMessage, botMessageTemplate]);\r\n\r\n    // Clear state after capturing values\r\n    if (!text) { // Clear text input if it wasn't passed directly (mic)\r\n        setChatValue(\"\");\r\n    }\r\n    setSelectedImage(null); // Clear selected image\r\n    setPreviewImage(null); // Clear preview image\r\n\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      let imageInput = null;\r\n      if (imagePartPromise) {\r\n        imageInput = await imagePartPromise; // Wait for Base64 conversion\r\n      }\r\n\r\n      // Define the callback for stream chunks\r\n      const onChunk = (chunk) => {\r\n        setMessage((prevChunk) => {\r\n          const updatedMessages = [...prevChunk];\r\n          if (updatedMessages.length > 0) {\r\n              const lastMsgIndex = updatedMessages.length - 1;\r\n              if (updatedMessages[lastMsgIndex].isBot) {\r\n                  updatedMessages[lastMsgIndex] = {\r\n                      ...updatedMessages[lastMsgIndex],\r\n                      text: (updatedMessages[lastMsgIndex].text || \"\") + chunk // Ensure text is initialized\r\n                  };\r\n              }\r\n          }\r\n          return updatedMessages;\r\n        });\r\n      };\r\n\r\n      // Call API within the updater to use correct history\r\n       await sendMsgToAI(historyForApi, imageInput, onChunk); // Pass imageInput\r\n\r\n    } catch (error) {\r\n       console.error(\"Error sending message:\", error);\r\n       setMessage((prevErr) => {\r\n           const updatedMessages = [...prevErr];\r\n          if (updatedMessages.length > 0) {\r\n              const lastMsgIndex = updatedMessages.length - 1;\r\n              if (updatedMessages[lastMsgIndex].isBot) {\r\n                  updatedMessages[lastMsgIndex] = {\r\n                      ...updatedMessages[lastMsgIndex],\r\n                      text: \"Sorry, an error occurred processing your request.\"\r\n                  };\r\n              }\r\n          }\r\n          return updatedMessages;\r\n       });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n\r\n  }, [chatValue, message, selectedImage, previewImage]); // Added image states to dependencies\r\n\r\n  const handleKeyPress = useCallback((e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  }, [handleSend]);\r\n\r\n  // handleQuery needs the same logic (without image for now, as examples don't use images)\r\n  const handleQuery = useCallback(async (e) => {\r\n    const text = e.target.innerText;\r\n    if (!text) return;\r\n\r\n    const userMessage = { text, isBot: false };\r\n    const botMessageTemplate = { text: \"\", isBot: true };\r\n    const historyForApi = [...message, userMessage]; // History for API call\r\n    setMessage((prev) => [...prev, userMessage, botMessageTemplate]); // Update UI\r\n    setLoading(true);\r\n\r\n    try {\r\n        const onChunk = (chunk) => {\r\n         setMessage((prevChunk) => {\r\n           const updatedMessages = [...prevChunk];\r\n            if (updatedMessages.length > 0) {\r\n                const lastMsgIndex = updatedMessages.length - 1;\r\n                if (updatedMessages[lastMsgIndex].isBot) {\r\n                    updatedMessages[lastMsgIndex] = {\r\n                        ...updatedMessages[lastMsgIndex],\r\n                        text: (updatedMessages[lastMsgIndex].text || \"\") + chunk\r\n                    };\r\n                }\r\n            }\r\n            return updatedMessages;\r\n          });\r\n        };\r\n        // Call API without image for handleQuery\r\n        await sendMsgToAI(historyForApi, null, onChunk);\r\n    } catch (error) {\r\n      console.error(\"Error sending query:\", error);\r\n       setMessage((prevErr) => {\r\n           const updatedMessages = [...prevErr];\r\n            if (updatedMessages.length > 0) {\r\n                const lastMsgIndex = updatedMessages.length - 1;\r\n                 if (updatedMessages[lastMsgIndex].isBot) {\r\n                    updatedMessages[lastMsgIndex] = {\r\n                        ...updatedMessages[lastMsgIndex],\r\n                        text: \"Sorry, an error occurred.\"\r\n                    };\r\n                }\r\n            }\r\n            return updatedMessages;\r\n       });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [message]); // Added message dependency\r\n\r\n  const contextValue = {\r\n    showSlide, setShowSlide,\r\n    Mobile, setMobile,\r\n    loading, setLoading,\r\n    chatValue, setChatValue,\r\n    message, setMessage,\r\n    msgEnd,\r\n    handleSend, handleKeyPress, handleQuery,\r\n    // Add image state and setter\r\n    selectedImage, setSelectedImage,\r\n    previewImage, setPreviewImage\r\n    // Removed language state/setter\r\n  };\r\n\r\n  return (\r\n    <ContextApp.Provider value={contextValue}>{children}</ContextApp.Provider>\r\n  );\r\n}\r\n\r\nexport default AppContext;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}