{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Akshay\\\\Downloads\\\\test\\\\agroAssist\\\\frontend\\\\src\\\\utils\\\\Context.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useRef, useEffect } from \"react\";\nimport { sendMsgToAI } from \"./Gemini\"; // This is now the non-streaming function\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ContextApp = /*#__PURE__*/createContext();\nfunction AppContext({\n  children\n}) {\n  _s();\n  const [showSlide, setShowSlide] = useState(false);\n  const [Mobile, setMobile] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [chatValue, setChatValue] = useState(\"\");\n  const [message, setMessage] = useState([]);\n  const msgEnd = useRef(null);\n  const [language, setLanguage] = useState('en-US');\n  useEffect(() => {\n    var _msgEnd$current;\n    (_msgEnd$current = msgEnd.current) === null || _msgEnd$current === void 0 ? void 0 : _msgEnd$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [message, loading]); // Added loading\n\n  // --- REVERTED handleSend FUNCTION ---\n  const handleSend = async () => {\n    if (chatValue.trim() === \"\") return;\n    const userMessage = {\n      text: chatValue,\n      isBot: false\n    };\n    const currentChatValue = chatValue; // Store before clearing\n\n    // 1. Add only the user message\n    setMessage(prev => [...prev, userMessage]);\n    setChatValue(\"\");\n\n    // 2. Set loading to true (this shows the skeleton)\n    setLoading(true);\n    try {\n      // 3. Call the non-streaming API function\n      const res = await sendMsgToAI(currentChatValue);\n      const botMessage = {\n        text: res,\n        isBot: true\n      };\n\n      // 4. Add the bot message *after* getting the response\n      setMessage(prev => [...prev, botMessage]);\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      const errorMessage = {\n        text: \"Sorry, I ran into an error. Please try again.\",\n        isBot: true\n      };\n      setMessage(prev => [...prev, errorMessage]);\n    } finally {\n      // 5. Set loading to false (this hides the skeleton)\n      setLoading(false);\n    }\n  };\n  // --- END OF REVERT ---\n\n  const handleKeyPress = e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  // This function is for the sidebar examples\n  const handleQuery = async e => {\n    const text = e.target.innerText;\n    if (!text) return;\n    const userMessage = {\n      text,\n      isBot: false\n    };\n    setMessage(prev => [...prev, userMessage]);\n    setLoading(true);\n    try {\n      const res = await sendMsgToAI(text);\n      const botMessage = {\n        text: res,\n        isBot: true\n      };\n      setMessage(prev => [...prev, botMessage]);\n    } catch (error) {\n      console.error(\"Error sending query:\", error);\n      const errorMessage = {\n        text: \"Sorry, I ran into an error.\",\n        isBot: true\n      };\n      setMessage(prev => [...prev, errorMessage]);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const contextValue = {\n    showSlide,\n    setShowSlide,\n    Mobile,\n    setMobile,\n    loading,\n    setLoading,\n    chatValue,\n    setChatValue,\n    message,\n    setMessage,\n    msgEnd,\n    handleSend,\n    handleKeyPress,\n    handleQuery,\n    // Make sure handleQuery is passed\n    language,\n    setLanguage\n  };\n  return /*#__PURE__*/_jsxDEV(ContextApp.Provider, {\n    value: contextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n}\n_s(AppContext, \"V4b+WfC48jLluUB+qJdS69LEQTE=\");\n_c = AppContext;\nexport default AppContext;\nvar _c;\n$RefreshReg$(_c, \"AppContext\");","map":{"version":3,"names":["React","createContext","useState","useRef","useEffect","sendMsgToAI","jsxDEV","_jsxDEV","ContextApp","AppContext","children","_s","showSlide","setShowSlide","Mobile","setMobile","loading","setLoading","chatValue","setChatValue","message","setMessage","msgEnd","language","setLanguage","_msgEnd$current","current","scrollIntoView","behavior","handleSend","trim","userMessage","text","isBot","currentChatValue","prev","res","botMessage","error","console","errorMessage","handleKeyPress","e","key","shiftKey","preventDefault","handleQuery","target","innerText","contextValue","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Akshay/Downloads/test/agroAssist/frontend/src/utils/Context.js"],"sourcesContent":["import React, { createContext, useState, useRef, useEffect } from \"react\";\r\nimport { sendMsgToAI } from \"./Gemini\"; // This is now the non-streaming function\r\n\r\nexport const ContextApp = createContext();\r\n\r\nfunction AppContext({ children }) {\r\n  const [showSlide, setShowSlide] = useState(false);\r\n  const [Mobile, setMobile] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [chatValue, setChatValue] = useState(\"\");\r\n  const [message, setMessage] = useState([]);\r\n  const msgEnd = useRef(null);\r\n  const [language, setLanguage] = useState('en-US');\r\n\r\n  useEffect(() => {\r\n    msgEnd.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [message, loading]); // Added loading\r\n\r\n  // --- REVERTED handleSend FUNCTION ---\r\n  const handleSend = async () => {\r\n    if (chatValue.trim() === \"\") return;\r\n\r\n    const userMessage = { text: chatValue, isBot: false };\r\n    const currentChatValue = chatValue; // Store before clearing\r\n    \r\n    // 1. Add only the user message\r\n    setMessage((prev) => [...prev, userMessage]); \r\n    setChatValue(\"\"); \r\n    \r\n    // 2. Set loading to true (this shows the skeleton)\r\n    setLoading(true);\r\n\r\n    try {\r\n      // 3. Call the non-streaming API function\r\n      const res = await sendMsgToAI(currentChatValue);\r\n      const botMessage = { text: res, isBot: true };\r\n      \r\n      // 4. Add the bot message *after* getting the response\r\n      setMessage((prev) => [...prev, botMessage]); \r\n      \r\n    } catch (error) {\r\n      console.error(\"Error sending message:\", error);\r\n      const errorMessage = {\r\n        text: \"Sorry, I ran into an error. Please try again.\",\r\n        isBot: true,\r\n      };\r\n      setMessage((prev) => [...prev, errorMessage]);\r\n    } finally {\r\n      // 5. Set loading to false (this hides the skeleton)\r\n      setLoading(false); \r\n    }\r\n  };\r\n  // --- END OF REVERT ---\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault(); \r\n      handleSend();\r\n    }\r\n  };\r\n  \r\n  // This function is for the sidebar examples\r\n  const handleQuery = async (e) => {\r\n    const text = e.target.innerText;\r\n    if (!text) return;\r\n\r\n    const userMessage = { text, isBot: false };\r\n    setMessage((prev) => [...prev, userMessage]);\r\n    setLoading(true);\r\n    try {\r\n      const res = await sendMsgToAI(text);\r\n      const botMessage = { text: res, isBot: true };\r\n      setMessage((prev) => [...prev, botMessage]);\r\n    } catch (error) {\r\n       console.error(\"Error sending query:\", error);\r\n       const errorMessage = { text: \"Sorry, I ran into an error.\", isBot: true };\r\n       setMessage((prev) => [...prev, errorMessage]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n  const contextValue = {\r\n    showSlide,\r\n    setShowSlide,\r\n    Mobile,\r\n    setMobile,\r\n    loading,\r\n    setLoading,\r\n    chatValue,\r\n    setChatValue,\r\n    message,\r\n    setMessage,\r\n    msgEnd,\r\n    handleSend,\r\n    handleKeyPress,\r\n    handleQuery, // Make sure handleQuery is passed\r\n    language,\r\n    setLanguage,\r\n  };\r\n\r\n  return (\r\n    <ContextApp.Provider value={contextValue}>{children}</ContextApp.Provider>\r\n  );\r\n}\r\n\r\nexport default AppContext;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}