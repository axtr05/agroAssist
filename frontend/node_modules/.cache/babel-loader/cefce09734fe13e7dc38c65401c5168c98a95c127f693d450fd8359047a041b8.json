{"ast":null,"code":"export const sendMsgToAI = async msg => {\n  const API_KEY = process.env.REACT_APP_GEMINI_KEY;\n\n  // --- THIS IS THE FIX ---\n  // Changed \"gemini-1.5-flash-latest\" to \"gemini-1.5-flash\"\n  const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${API_KEY}`; // --- END OF FIX ---\n\n  const instructedMsg = `\n  You are \"AgroAssist,\" an expert agricultural assistant for farmers.\n  You are speaking to a farmer who needs a simple, practical, and direct answer.\n  Use simple, easy-to-understand language. Do NOT use scientific jargon.\n\n  YOUR RULES:\n  1. Give the most important answer in the very first sentence.\n  2. If the user's question can be answered in a short paragraph, do so (2-3 sentences max).\n  3. If the user's question asks for a list of items (like fertilizers, types of pests, or steps), you MUST use a simple bulleted list. Keep list descriptions short.\n  4. Your entire response must be direct, clear, and easy to read.\n\n  User's question: ${msg}\n  `;\n  const requestOptions = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      contents: [{\n        role: \"user\",\n        parts: [{\n          text: instructedMsg.trim()\n        }]\n      }]\n    })\n  };\n  try {\n    var _data$candidates, _data$candidates$, _data$candidates$$con, _data$candidates$$con2, _data$candidates$$con3;\n    const response = await fetch(API_URL, requestOptions);\n    if (!response.ok) {\n      var _errorData$error;\n      const errorData = await response.json();\n      console.error(\"Gemini API Error Response:\", errorData);\n      throw new Error(`API request failed with status ${response.status}: ${(errorData === null || errorData === void 0 ? void 0 : (_errorData$error = errorData.error) === null || _errorData$error === void 0 ? void 0 : _errorData$error.message) || 'Unknown error'}`);\n    }\n    const data = await response.json();\n    return (data === null || data === void 0 ? void 0 : (_data$candidates = data.candidates) === null || _data$candidates === void 0 ? void 0 : (_data$candidates$ = _data$candidates[0]) === null || _data$candidates$ === void 0 ? void 0 : (_data$candidates$$con = _data$candidates$.content) === null || _data$candidates$$con === void 0 ? void 0 : (_data$candidates$$con2 = _data$candidates$$con.parts) === null || _data$candidates$$con2 === void 0 ? void 0 : (_data$candidates$$con3 = _data$candidates$$con2[0]) === null || _data$candidates$$con3 === void 0 ? void 0 : _data$candidates$$con3.text) || \"No response text found.\";\n  } catch (error) {\n    console.error(\"Gemini API call failed:\", error);\n    return `Error connecting to Gemini API: ${error.message}`;\n  }\n};","map":{"version":3,"names":["sendMsgToAI","msg","API_KEY","process","env","REACT_APP_GEMINI_KEY","API_URL","instructedMsg","requestOptions","method","headers","body","JSON","stringify","contents","role","parts","text","trim","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","response","fetch","ok","_errorData$error","errorData","json","console","error","Error","status","message","data","candidates","content"],"sources":["C:/Users/Akshay/Downloads/test/agroAssist/frontend/src/utils/Gemini.js"],"sourcesContent":["export const sendMsgToAI = async (msg) => {\r\n  const API_KEY = process.env.REACT_APP_GEMINI_KEY;\r\n\r\n  // --- THIS IS THE FIX ---\r\n  // Changed \"gemini-1.5-flash-latest\" to \"gemini-1.5-flash\"\r\nconst API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${API_KEY}`;  // --- END OF FIX ---\r\n\r\n  const instructedMsg = `\r\n  You are \"AgroAssist,\" an expert agricultural assistant for farmers.\r\n  You are speaking to a farmer who needs a simple, practical, and direct answer.\r\n  Use simple, easy-to-understand language. Do NOT use scientific jargon.\r\n\r\n  YOUR RULES:\r\n  1. Give the most important answer in the very first sentence.\r\n  2. If the user's question can be answered in a short paragraph, do so (2-3 sentences max).\r\n  3. If the user's question asks for a list of items (like fertilizers, types of pests, or steps), you MUST use a simple bulleted list. Keep list descriptions short.\r\n  4. Your entire response must be direct, clear, and easy to read.\r\n\r\n  User's question: ${msg}\r\n  `;\r\n\r\n  const requestOptions = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      contents: [\r\n        {\r\n          role: \"user\",\r\n          parts: [{ text: instructedMsg.trim() }],\r\n        },\r\n      ],\r\n    }),\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(API_URL, requestOptions);\r\n    if (!response.ok) {\r\n      const errorData = await response.json();\r\n      console.error(\"Gemini API Error Response:\", errorData);\r\n      throw new Error(`API request failed with status ${response.status}: ${errorData?.error?.message || 'Unknown error'}`);\r\n    }\r\n    const data = await response.json();\r\n\r\n    return data?.candidates?.[0]?.content?.parts?.[0]?.text || \"No response text found.\";\r\n  } catch (error) {\r\n    console.error(\"Gemini API call failed:\", error);\r\n    return `Error connecting to Gemini API: ${error.message}`;\r\n  }\r\n};"],"mappings":"AAAA,OAAO,MAAMA,WAAW,GAAG,MAAOC,GAAG,IAAK;EACxC,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB;;EAEhD;EACA;EACF,MAAMC,OAAO,GAAI,gGAA+FJ,OAAQ,EAAC,CAAC,CAAE;;EAE1H,MAAMK,aAAa,GAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqBN,GAAI;AACzB,GAAG;EAED,MAAMO,cAAc,GAAG;IACrBC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBC,QAAQ,EAAE,CACR;QACEC,IAAI,EAAE,MAAM;QACZC,KAAK,EAAE,CAAC;UAAEC,IAAI,EAAEV,aAAa,CAACW,IAAI,CAAC;QAAE,CAAC;MACxC,CAAC;IAEL,CAAC;EACH,CAAC;EAED,IAAI;IAAA,IAAAC,gBAAA,EAAAC,iBAAA,EAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACnB,OAAO,EAAEE,cAAc,CAAC;IACrD,IAAI,CAACgB,QAAQ,CAACE,EAAE,EAAE;MAAA,IAAAC,gBAAA;MAChB,MAAMC,SAAS,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MACvCC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEH,SAAS,CAAC;MACtD,MAAM,IAAII,KAAK,CAAE,kCAAiCR,QAAQ,CAACS,MAAO,KAAI,CAAAL,SAAS,aAATA,SAAS,wBAAAD,gBAAA,GAATC,SAAS,CAAEG,KAAK,cAAAJ,gBAAA,uBAAhBA,gBAAA,CAAkBO,OAAO,KAAI,eAAgB,EAAC,CAAC;IACvH;IACA,MAAMC,IAAI,GAAG,MAAMX,QAAQ,CAACK,IAAI,CAAC,CAAC;IAElC,OAAO,CAAAM,IAAI,aAAJA,IAAI,wBAAAhB,gBAAA,GAAJgB,IAAI,CAAEC,UAAU,cAAAjB,gBAAA,wBAAAC,iBAAA,GAAhBD,gBAAA,CAAmB,CAAC,CAAC,cAAAC,iBAAA,wBAAAC,qBAAA,GAArBD,iBAAA,CAAuBiB,OAAO,cAAAhB,qBAAA,wBAAAC,sBAAA,GAA9BD,qBAAA,CAAgCL,KAAK,cAAAM,sBAAA,wBAAAC,sBAAA,GAArCD,sBAAA,CAAwC,CAAC,CAAC,cAAAC,sBAAA,uBAA1CA,sBAAA,CAA4CN,IAAI,KAAI,yBAAyB;EACtF,CAAC,CAAC,OAAOc,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,OAAQ,mCAAkCA,KAAK,CAACG,OAAQ,EAAC;EAC3D;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}